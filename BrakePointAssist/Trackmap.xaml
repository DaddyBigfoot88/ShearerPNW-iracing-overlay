<Window x:Class="BrakePointAssist.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ShearerPNW Brake Point Assistant" Height="950" Width="1500"
        Background="#FF0A0A0A" WindowStartupLocation="CenterScreen" ResizeMode="CanResizeWithGrip">

    <Window.Resources>
        <!-- Custom Styles -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#FF2A2A2A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="#FF3A3A3A"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF3A3A3A"/>
                                <Setter Property="BorderBrush" Value="#FFFF6600"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF1A1A1A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#FFE31E24"/>
            <Setter Property="BorderBrush" Value="#FFE31E24"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FFFF3339"/>
                    <Setter Property="BorderBrush" Value="#FFFF3339"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#FF00AA44"/>
            <Setter Property="BorderBrush" Value="#FF00AA44"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FF00CC55"/>
                    <Setter Property="BorderBrush" Value="#FF00CC55"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="TabButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FFAAAAAA"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="25,15"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="Background" Value="#FF2A2A2A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ActiveTabButton" TargetType="Button" BasedOn="{StaticResource TabButton}">
            <Setter Property="Foreground" Value="#FFFF6600"/>
            <Setter Property="Background" Value="#FF2A2A2A"/>
        </Style>

        <Style x:Key="InfoPanel" TargetType="Border">
            <Setter Property="Background" Value="#FF1A2B1A"/>
            <Setter Property="BorderBrush" Value="#FF2A4A2A"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="100"/>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="70"/>
        </Grid.RowDefinitions>

        <!-- Enhanced Header with Logo -->
        <Border Grid.Row="0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#FF1A1A1A" Offset="0"/>
                    <GradientStop Color="#FF2A2A2A" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border BorderBrush="#FFFF6600" BorderThickness="0,0,0,3">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Logo and Branding -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="25,0">
                        <!-- Logo Placeholder -->
                        <Border Width="60" Height="60" Background="#FF0A4A0A" CornerRadius="8" Margin="0,0,15,0">
                            <Border.Effect>
                                <DropShadowEffect Color="#FF000000" BlurRadius="8" ShadowDepth="2"/>
                            </Border.Effect>
                            <Viewbox Stretch="Uniform" Margin="8">
                                <Canvas Width="100" Height="100">
                                    <!-- Mountain peaks -->
                                    <Polygon Points="20,80 40,30 60,80" Fill="#FFFF6600"/>
                                    <Polygon Points="40,80 60,20 80,80" Fill="#FFFF6600"/>
                                    <!-- Speed lines -->
                                    <Rectangle Canvas.Left="10" Canvas.Top="85" Width="20" Height="2" Fill="White"/>
                                    <Rectangle Canvas.Left="15" Canvas.Top="88" Width="15" Height="2" Fill="White"/>
                                    <Rectangle Canvas.Left="20" Canvas.Top="91" Width="10" Height="2" Fill="White"/>
                                </Canvas>
                            </Viewbox>
                        </Border>
                        
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="SHEARERPNW" FontSize="28" FontWeight="Black" 
                                     Foreground="#FFFF6600" FontFamily="Arial Black"/>
                            <TextBlock Text="BRAKE POINT ASSISTANT" FontSize="14" FontWeight="Bold"
                                     Foreground="#FFCCCCCC" FontFamily="Arial" Margin="0,-5,0,0"/>
                            <TextBlock Text="Professional iRacing Training Aid" FontSize="10" 
                                     Foreground="#FF888888" FontFamily="Arial" Margin="0,-2,0,0"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Version info -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock x:Name="AppVersionText" Text="v2.1 - Development Build" 
                                 Foreground="#FFAAAAAA" FontSize="12" HorizontalAlignment="Center"/>
                        <TextBlock x:Name="BuildDateText" Text="" 
                                 Foreground="#FF666666" FontSize="10" HorizontalAlignment="Center"/>
                    </StackPanel>

                    <!-- Connection Status -->
                    <Border Grid.Column="2" Background="#FF2A2A2A" BorderBrush="#FF3A3A3A" 
                            BorderThickness="1" CornerRadius="8" Padding="20,10" Margin="20,0">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="iRacing Status:" Foreground="#FFCCCCCC" FontWeight="Bold" Margin="0,0,10,0"/>
                            <Ellipse x:Name="ConnectionStatus" Width="16" Height="16" Fill="#FFFF0000" Margin="0,0,8,0">
                                <Ellipse.Effect>
                                    <DropShadowEffect Color="#FFFF0000" BlurRadius="4" ShadowDepth="0"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <TextBlock x:Name="ConnectionText" Text="Disconnected" Foreground="#FFCCCCCC" FontWeight="Bold"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>
        </Border>

        <!-- Navigation Tabs -->
        <Border Grid.Row="1" Background="#FF1A1A1A" BorderBrush="#FF3A3A3A" BorderThickness="0,0,0,1">
            <Grid>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <Button x:Name="MainTabButton" Content="🏁 MAIN" Style="{StaticResource ActiveTabButton}" Click="MainTab_Click"/>
                    <Button x:Name="TracksTabButton" Content="🗺️ TRACK MAPS" Style="{StaticResource TabButton}" Click="TracksTab_Click"/>
                    <Button x:Name="SettingsTabButton" Content="⚙️ SETTINGS" Style="{StaticResource TabButton}" Click="SettingsTab_Click"/>
                    <Button x:Name="AboutTabButton" Content="ℹ️ ABOUT" Style="{StaticResource TabButton}" Click="AboutTab_Click"/>
                </StackPanel>
                
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,20,0">
                    <Border Background="#FF2A2A2A" CornerRadius="4" Padding="10,5">
                        <TextBlock x:Name="CurrentTabText" Text="Main - Brake Point Assistant" 
                                 Foreground="#FFFF6600" FontWeight="Bold" FontSize="12"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Tab Content Area -->
        <Grid Grid.Row="2" x:Name="TabContentArea">
            <!-- Main Tab Content (Default) -->
            <Grid x:Name="MainTabContent" Visibility="Visible">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="380"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="350"/>
                </Grid.ColumnDefinitions>

                <!-- Left Panel - Controls -->
                <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Recording Controls -->
                        <Border Style="{StaticResource InfoPanel}">
                            <StackPanel>
                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Grid.Column="0" Width="4" Height="24" Fill="#FFFF6600" Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" Text="RECORDING CONTROLS" FontSize="18" FontWeight="Bold" 
                                             Foreground="#FFFF6600" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Button x:Name="RecordButton" Content="▶ START RECORDING" Style="{StaticResource PrimaryButton}"
                                        Margin="0,0,0,12" Click="RecordButton_Click" Height="50" FontSize="16"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button x:Name="SaveButton" Grid.Column="0" Content="💾 SAVE" Style="{StaticResource SuccessButton}"
                                            Margin="0,0,5,0" Click="SaveButton_Click"/>
                                    <Button x:Name="LoadButton" Grid.Column="1" Content="📁 LOAD" Style="{StaticResource ModernButton}"
                                            Margin="5,0,0,0" Click="LoadButton_Click"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Track Information -->
                        <Border Style="{StaticResource InfoPanel}">
                            <StackPanel>
                                <Grid Margin="0,0,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Grid.Column="0" Width="4" Height="20" Fill="#FF00FF66" Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" Text="TRACK INFORMATION" FontSize="16" FontWeight="Bold" 
                                             Foreground="#FF00FF66" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <TextBlock Text="CURRENT TRACK" FontSize="12" FontWeight="Bold" 
                                         Foreground="#FFAAAAAA" Margin="0,0,0,5"/>
                                <TextBlock x:Name="TrackNameText" Text="Not Connected" FontSize="16" FontWeight="Bold"
                                         Foreground="White" Margin="0,0,0,15" TextWrapping="Wrap"/>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="LAP" FontSize="10" Foreground="#FFAAAAAA" HorizontalAlignment="Center"/>
                                        <TextBlock x:Name="LapNumberText" Text="0" FontSize="24" FontWeight="Bold" 
                                                 Foreground="#FFFF6600" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="SPEED" FontSize="10" Foreground="#FFAAAAAA" HorizontalAlignment="Center"/>
                                        <TextBlock x:Name="SpeedText" Text="0 km/h" FontSize="18" FontWeight="Bold" 
                                                 Foreground="#FF00FF66" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="ZONES" FontSize="10" Foreground="#FFAAAAAA" HorizontalAlignment="Center"/>
                                        <TextBlock x:Name="ZoneCountText" Text="0" FontSize="24" FontWeight="Bold" 
                                                 Foreground="#FFE31E24" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Session Information -->
                        <Border Style="{StaticResource InfoPanel}">
                            <StackPanel>
                                <Grid Margin="0,0,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Grid.Column="0" Width="4" Height="20" Fill="#FFE31E24" Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" Text="SESSION DATA" FontSize="16" FontWeight="Bold" 
                                             Foreground="#FFE31E24" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="BRAKE %" FontSize="10" Foreground="#FFAAAAAA"/>
                                        <TextBlock x:Name="BrakeText" Text="0%" FontSize="16" FontWeight="Bold" 
                                                 Foreground="#FFE31E24"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="LAP DIST" FontSize="10" Foreground="#FFAAAAAA"/>
                                        <TextBlock x:Name="LapDistText" Text="0m" FontSize="16" FontWeight="Bold" 
                                                 Foreground="#FF00FF66"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>

                <!-- Center Panel - Track Visualization -->
                <Border Grid.Column="1" Background="#FF1A1A1A" BorderBrush="#FF3A3A3A" BorderThickness="2" 
                        CornerRadius="12" Margin="10,0" Padding="20">
                    <Border.Effect>
                        <DropShadowEffect Color="#FF000000" BlurRadius="10" ShadowDepth="3"/>
                    </Border.Effect>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <Grid Grid.Row="0" Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Rectangle Grid.Column="0" Width="4" Height="24" Fill="#FFFF6600" Margin="0,0,15,0"/>
                            <TextBlock Grid.Column="1" Text="TRACK VISUALIZATION" FontSize="20" FontWeight="Bold" 
                                     Foreground="#FFFF6600" VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2" x:Name="TrackLengthText" Text="" FontSize="12" 
                                     Foreground="#FFAAAAAA" VerticalAlignment="Center"/>
                        </Grid>
                        
                        <Border Grid.Row="1" Background="#FF0A0A0A" BorderBrush="#FF2A2A2A" BorderThickness="1" 
                                CornerRadius="8" Padding="10">
                            <Canvas x:Name="TrackCanvas" ClipToBounds="True">
                                <Canvas.Background>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#FF0A0A0A" Offset="0"/>
                                        <GradientStop Color="#FF050505" Offset="1"/>
                                    </RadialGradientBrush>
                                </Canvas.Background>
                            </Canvas>
                        </Border>

                        <Grid Grid.Row="2" Margin="0,15,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center">
                                <Ellipse Width="12" Height="12" Fill="#FF00FF66" Margin="0,0,5,0"/>
                                <TextBlock Text="Current Position" FontSize="10" Foreground="#FFAAAAAA" VerticalAlignment="Center"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                                <Ellipse Width="12" Height="12" Fill="#FFE31E24" Margin="0,0,5,0"/>
                                <TextBlock Text="Brake Zones" FontSize="10" Foreground="#FFAAAAAA" VerticalAlignment="Center"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Center">
                                <Rectangle Width="12" Height="3" Fill="#FFFF6600" Margin="0,0,5,0"/>
                                <TextBlock Text="Track Surface" FontSize="10" Foreground="#FFAAAAAA" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Border>

                <!-- Right Panel - Quick Settings -->
                <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Quick Settings -->
                        <Border Style="{StaticResource InfoPanel}">
                            <StackPanel>
                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Grid.Column="0" Width="4" Height="20" Fill="#FFFF6600" Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" Text="QUICK SETTINGS" FontSize="16" FontWeight="Bold" 
                                             Foreground="#FFFF6600" VerticalAlignment="Center"/>
                                </Grid>

                                <!-- Lead Distance -->
                                <TextBlock Text="Lead Distance" Foreground="White" FontWeight="Bold" Margin="0,0,0,8"/>
                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Slider x:Name="LeadDistanceSlider" Grid.Column="0" Minimum="20" Maximum="150" 
                                            Value="75" TickFrequency="5" IsSnapToTickEnabled="True" 
                                            ValueChanged="LeadDistanceSlider_ValueChanged" Height="20"/>
                                    <Border Grid.Column="1" Background="#FF2A2A2A" CornerRadius="4" Padding="8,4" Margin="10,0,0,0">
                                        <TextBlock x:Name="LeadDistanceText" Text="75m" Foreground="#FFFF6600" FontWeight="Bold"/>
                                    </Border>
                                </Grid>

                                <!-- Volume -->
                                <TextBlock Text="Alert Volume" Foreground="White" FontWeight="Bold" Margin="0,0,0,8"/>
                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Slider x:Name="VolumeSlider" Grid.Column="0" Minimum="0" Maximum="1" 
                                            Value="0.85" TickFrequency="0.05" IsSnapToTickEnabled="True"
                                            ValueChanged="VolumeSlider_ValueChanged" Height="20"/>
                                    <Border Grid.Column="1" Background="#FF2A2A2A" CornerRadius="4" Padding="8,4" Margin="10,0,0,0">
                                        <TextBlock x:Name="VolumeText" Text="85%" Foreground="#FF00FF66" FontWeight="Bold"/>
                                    </Border>
                                </Grid>

                                <!-- Test Button -->
                                <Button x:Name="TestBeepButton" Content="🔊 TEST SOUND" 
                                        Style="{StaticResource ModernButton}" Background="#FFFF6600"
                                        Click="TestBeepButton_Click" Height="45" FontSize="14" Margin="0,0,0,15"/>

                                <!-- Options -->
                                <CheckBox x:Name="OnlyWhenNotBrakingCheck" Content="Only alert when not braking" 
                                          Foreground="White" IsChecked="True" FontWeight="Bold"
                                          Checked="OnlyWhenNotBrakingCheck_Changed" Unchecked="OnlyWhenNotBrakingCheck_Changed"/>
                            </StackPanel>
                        </Border>

                        <!-- Quick Actions -->
                        <Border Style="{StaticResource InfoPanel}">
                            <StackPanel>
                                <Grid Margin="0,0,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Grid.Column="0" Width="4" Height="20" Fill="#FF00FF66" Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" Text="QUICK ACTIONS" FontSize="16" FontWeight="Bold" 
                                             Foreground="#FF00FF66" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Button x:Name="ClearZonesButton" Content="🗑️ Clear Zones" Style="{StaticResource ModernButton}"
                                        Background="#FF8B4513" Margin="0,0,0,10" Click="ClearZonesButton_Click"/>
                                <Button x:Name="OpenFolderButton" Content="📂 Data Folder" Style="{StaticResource ModernButton}"
                                        Margin="0,0,0,10" Click="OpenFolderButton_Click"/>
                                <Button Content="🗺️ View Track Maps" Style="{StaticResource ModernButton}"
                                        Background="#FFFF6600" Click="TracksTab_Click"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Grid>

            <!-- Track Maps Tab Content -->
            <Grid x:Name="TracksTabContent" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="300"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="350"/>
                </Grid.ColumnDefinitions>

                <!-- Track Selection Panel -->
                <Border Grid.Column="0" Background="#FF2A2A2A" BorderBrush="#FF3A3A3A" BorderThickness="1" 
                        CornerRadius="8" Margin="10" Padding="15">
                    <StackPanel>
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Rectangle Grid.Column="0" Width="4" Height="24" Fill="#FFFF6600" Margin="0,0,10,0"/>
                            <TextBlock Grid.Column="1" Text="TRACK LIBRARY" FontSize="18" FontWeight="Bold" 
                                     Foreground="#FFFF6600" VerticalAlignment="Center"/>
                        </Grid>

                        <TextBlock Text="Search Tracks" Foreground="White" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="TrackSearchBox" Background="#FF3A3A3A" Foreground="White" 
                                 BorderBrush="#FF5A5A5A" Padding="8" Margin="0,0,0,15"
                                 TextChanged="TrackSearchBox_TextChanged"/>

                        <TextBlock Text="Categories" Foreground="White" FontWeight="Bold" Margin="0,0,0,10"/>
                        <ListBox x:Name="TrackCategoryList" Background="#FF3A3A3A" Foreground="White"
                                 BorderBrush="#FF5A5A5A" Height="120" Margin="0,0,0,15"
                                 SelectionChanged="TrackCategoryList_SelectionChanged">
                            <ListBoxItem Content="🏁 All Tracks" IsSelected="True"/>
                            <ListBoxItem Content="🏎️ Road Courses"/>
                            <ListBoxItem Content="🏁 Ovals"/>
                            <ListBoxItem Content="🏞️ Street Circuits"/>
                            <ListBoxItem Content="🌍 International"/>
                            <ListBoxItem Content="🇺🇸 USA"/>
                            <ListBoxItem Content="🏕️ Dirt Tracks"/>
                        </ListBox>

                        <TextBlock Text="Available Tracks" Foreground="White" FontWeight="Bold" Margin="0,0,0,10"/>
                        <ListBox x:Name="TrackList" Background="#FF3A3A3A" Foreground="White"
                                 BorderBrush="#FF5A5A5A" Height="300"
                                 SelectionChanged="TrackList_SelectionChanged"/>
                    </StackPanel>
                </Border>

                <!-- Track Map Display -->
                <Border Grid.Column="1" Background="#FF1A1A1A" BorderBrush="#FF3A3A3A" BorderThickness="2" 
                        CornerRadius="12" Margin="10" Padding="20">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <Grid Grid.Row="0" Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock x:Name="SelectedTrackTitle" Text="Select a track to view detailed map" 
                                     FontSize="20" FontWeight="Bold" Foreground="#FFFF6600"/>
                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <Button Content="📐 Measure" Style="{StaticResource ModernButton}" Margin="0,0,10,0"/>
                                <Button Content="🎯 Find Braking Points" Style="{StaticResource ModernButton}" Background="#FFFF6600"/>
                            </StackPanel>
                        </Grid>
                        
                        <Border Grid.Row="1" Background="#FF0A0A0A" BorderBrush="#FF2A2A2A" BorderThickness="1" 
                                CornerRadius="8" Padding="10">
                            <Canvas x:Name="TrackMapCanvas" ClipToBounds="True">
                                <Canvas.Background>
                                    <RadialGradientBrush>
                                        <GradientStop Color="#FF0A0A0A" Offset="0"/>
                                        <GradientStop Color="#FF050505" Offset="1"/>
                                    </RadialGradientBrush>
                                </Canvas.Background>
                                <!-- Placeholder content -->
                                <TextBlock Canvas.Left="50" Canvas.Top="50" 
                                         Text="🗺️ Detailed track maps with corner labels coming soon!" 
                                         Foreground="#FFAAAAAA" FontSize="16"/>
                                <TextBlock Canvas.Left="50" Canvas.Top="80" 
                                         Text="• Real track layouts from iRacing data" 
                                         Foreground="#FFAAAAAA" FontSize="12"/>
                                <TextBlock Canvas.Left="50" Canvas.Top="100" 
                                         Text="• Corner numbers and names" 
                                         Foreground="#FFAAAAAA" FontSize="12"/>
                                <TextBlock Canvas.Left="50" Canvas.Top="120" 
                                         Text="• Elevation changes" 
                                         Foreground="#FFAAAAAA" FontSize="12"/>
                                <TextBlock Canvas.Left="50" Canvas.Top="140" 
                                         Text="• Optimal racing lines" 
                                         Foreground="#FFAAAAAA" FontSize="12"/>
                            </Canvas>
                        </Border>
                    </Grid>
                </Border>

                <!-- Track Info Panel -->
                <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <Border Style="{StaticResource InfoPanel}">
                            <StackPanel>
                                <Grid Margin="0,0,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Grid.Column="0" Width="4" Height="20" Fill="#FF00FF66" Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" Text="TRACK DETAILS" FontSize="16" FontWeight="Bold" 
                                             Foreground="#FF00FF66" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <TextBlock x:Name="TrackDetailsText" Text="Select a track to view details" 
                                         Foreground="White" TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource InfoPanel}">
                            <StackPanel>
                                <Grid Margin="0,0,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Grid.Column="0" Width="4" Height="20" Fill="#FFE31E24" Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" Text="CORNER ANALYSIS" FontSize="16" FontWeight="Bold" 
                                             Foreground="#FFE31E24" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <TextBlock Text="• Corner classifications" Foreground="#FFAAAAAA" Margin="0,0,0,5"/>
                                <TextBlock Text="• Braking zones" Foreground="#FFAAAAAA" Margin="0,0,0,5"/>
                                <TextBlock Text="• Racing lines" Foreground="#FFAAAAAA" Margin="0,0,0,5"/>
                                <TextBlock Text="• Elevation data" Foreground="#FFAAAAAA"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource InfoPanel}">
                            <StackPanel>
                                <Grid Margin="0,0,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle Grid.Column="0" Width="4" Height="20" Fill="#FFFF6600" Margin="0,0,10,0"/>
                                    <TextBlock Grid.Column="1" Text="DEVELOPMENT TOOLS" FontSize="16" FontWeight="Bold" 
                                             Foreground="#FFFF6600" VerticalAlignment="Center"/>
                                </Grid>
                                
                                <Button Content="📊 Generate Data" Style="{StaticResource ModernButton}" Margin="0,0,0,10"/>
                                <Button Content="🔧 Debug Track" Style="{StaticResource ModernButton}" Margin="0,0,0,10"/>
                                <Button Content="📈 Export Map" Style="{StaticResource ModernButton}"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Grid>

            <!-- Settings Tab Content -->
            <Grid x:Name="SettingsTabContent" Visibility="Collapsed">
                <TextBlock Text="⚙️ Advanced Settings Coming Soon!" 
                         FontSize="24" Foreground="#FFAAAAAA" 
                         HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Grid>

            <!-- About Tab Content -->
            <Grid x:Name="AboutTabContent" Visibility="Collapsed">
                <TextBlock Text="ℹ️ About & Help Coming Soon!" 
                         FontSize="24" Foreground="#FFAAAAAA" 
                         HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Grid>
        </Grid>

        <!-- Enhanced Status Bar -->
        <Border Grid.Row="3" BorderBrush="#FFFF6600" BorderThickness="0,2,0,0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#FF2A2A2A" Offset="0"/>
                    <GradientStop Color="#FF1A1A1A" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="25,0">
                    <Ellipse Width="8" Height="8" Fill="#FF00FF66" Margin="0,0,10,0"/>
                    <TextBlock x:Name="StatusText" Text="Ready - Connect to iRacing to begin" 
                             Foreground="White" FontWeight="Bold" VerticalAlignment="Center"/>
                </StackPanel>
                
                <Border Grid.Column="1" Background="#FF2A2A2A" CornerRadius="4" Padding="10,5" Margin="10,0">
                    <TextBlock x:Name="LastLapTimeText" Text="Last Lap: --:--" 
                             Foreground="#FFFF6600" FontWeight="Bold" FontSize="12"/>
                </Border>
                
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="25,0">
                    <TextBlock Text="ShearerPNW Brake Point Assistant v2.1" 
                             Foreground="#FFAAAAAA" FontSize="12" FontWeight="Bold"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
